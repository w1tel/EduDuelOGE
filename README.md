## Обзор

Телеграм-бот разработан для помощи школьникам в подготовке к ОГЭ по информатике. Он предоставляет тренировочные вопросы, отслеживает прогресс пользователей и предлагает серии тестов для имитации экзаменационных условий. Бот написан на языке Python с использованием библиотеки `telebot`.

---

## Установка

Для установки и запуска проекта выполните следующие шаги:

1. **Клонируйте репозиторий**:
   ```bash
   git clone <repository_url>
   cd <project_directory>
   ```

2. **Установите зависимости**:
   Проект использует несколько Python-библиотек. Установите их с помощью команды:
   ```bash
   pip install -r requirements.txt
   ```

3. **Настройте переменные окружения**:
   Создайте файл `.env` в корневой директории проекта и добавьте токен вашего телеграм-бота:
   ```
   TOKEN=your_telegram_bot_token
   ```

4. **Запустите бот**:
   Запустите бота следующей командой:
   ```bash
   python main.py
   ```

---

## Конфигурация

- **Токен Telegram-бота**: Токен необходим для работы бота и получается через Telegram BotFather. Укажите его в файле `.env`, как показано выше.

- **Файлы базы данных**: Бот использует JSON-файлы для хранения вопросов и данных пользователей. Убедитесь, что в директории проекта присутствуют файлы:
  - `database/questions.json` — содержит вопросы для подготовки.
  - `users.json` — хранит данные пользователей.

---

## Использование

Бот поддерживает следующие команды и функции:

- **/start**: Регистрирует пользователя (если он ещё не зарегистрирован) и показывает главное меню.
- **/help**: Выводит справочную информацию о возможностях бота.

### Опции главного меню

- **Тест**: Дает выбор между случайным вопросом или серией вопросов.
- **Мой рейтинг**: Показывает статистику и место пользователя в рейтинге.
- **Настройки**: Позволяет настроить параметры, например, количество вопросов в серии.

### Взаимодействие

- Пользователи отвечают на вопросы, отправляя сообщения.
- Бот сообщает о правильности ответа и обновляет статистику пользователя.

---

## Структура кода

Проект организован в несколько модулей:

- **`main.py`**: Основной файл, содержащий логику бота: обработку команд, callback-запросов и сообщений.
- **`models.py`**: Определяет структуры данных (`Question` и `User`) с использованием `TypedDict` для строгой типизации.
- **`questions.py`**: Управляет получением вопросов из JSON-файла базы данных.
- **`utils.py`**: Содержит вспомогательные функции для работы с JSON-файлами и управления пользователями.
- **`inline_keyboards.py`**: Определяет inline-клавиатуры для интерфейса бота.
- **`constants.py`**: Хранит константные значения, такие как текстовые шаблоны.
- **`database/questions.json`**: JSON-файл с вопросами.
- **`users.json`**: JSON-файл с данными пользователей.

---

## Модели данных

Проект использует следующие модели данных:

- **`Question`**:
  - `title`: Заголовок вопроса (str).
  - `statement`: Условие задачи (str).
  - `question`: Сам вопрос (str).
  - `difficulty`: Уровень сложности (str).
  - `answerFormat`: Формат ответа (str).
  - `correctAnswer`: Правильный ответ (str).
  - `sequenceNumber`: Порядковый номер (int).
  - `code`: Код (str, опционально).

- **`User`**:
  - `username`: Имя пользователя (str).
  - `statistic`: Статистика (TypedDict с полями `total_tests`, `correct_answers`, `success_rate`).
  - `number_of_tests`: Количество вопросов в серии (int).
  - `state`: Текущее состояние пользователя (str).
  - `correct_answer_question`: Правильный ответ на текущий вопрос (str или None).
  - `seria_of_questions`: Список вопросов в серии (list[Question]).

---

## Основные функции и методы

### `main.py`

- **`start_message`**: Обрабатывает команду `/start`.
- **`callback_query`**: Обрабатывает callback-запросы от inline-клавиатур.
- **`handle_message`**: Управляет сообщениями пользователей, включая проверку ответов.
- **`replace_message`**: Удаляет старое сообщение и отправляет новое с новым текстом и разметкой.

### `questions.py`

- **`get_random_tasks`**: Возвращает заданное количество случайных вопросов.
- **`get_random_task`**: Возвращает один случайный вопрос.
- **`get_all_tasks`**: Возвращает все вопросы из базы.

### `utils.py`

- **`read_json`, `write_json`**: Функции для чтения и записи JSON-файлов.
- **`register_user`, `is_registered`, `get_user`, `update_user`, `delete_user`**: Функции управления пользователями.
- **`get_user_rank`**: Рассчитывает место пользователя в рейтинге по проценту успеха.

---

## Как внести вклад

Мы рады вкладу в проект. Чтобы помочь:

1. Сделайте fork репозитория.
2. Создайте новую ветку для вашей функции или исправления.
3. Внесите изменения и закоммитьте их с понятными сообщениями.
4. Отправьте изменения в ваш fork.
5. Создайте pull request в основной репозиторий.

Убедитесь, что ваш код соответствует стандартам проекта и включает тесты, если это необходимо.

---

## Лицензия

Проект распространяется под лицензией [MIT License](LICENSE).

---

Данная документация находится в файле `README.md` в папке `docs`. Она охватывает все ключевые аспекты проекта и предоставляет достаточно информации для начала работы с ботом, его настройки и дальнейшего развития.